#!/usr/bin/env node
const read = require('read-input')
const parse = require('../lib/parser')

const cli = require('meow')(`
  Usage:
    $ tps_report

  Options:
    -h, --help       show usage information
    -v, --version    print version info and exit
`, {
  boolean: ['help', 'version'],
  alias: {
    h: 'help', v: 'version'
  }
})

read(cli.input)
.then(res => {
  res.files.forEach(file => {
    console.log(file.data)
    const output = parse(file.data)
    console.log('output:', require('util').inspect(output, { depth: null, colors: true }))
  })
})
